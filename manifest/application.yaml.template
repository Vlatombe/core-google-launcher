---
apiVersion: app.k8s.io/v1beta1
kind: Application
metadata:
  name: "$name"
  namespace: "$namespace"
  annotations:
    kubernetes-engine.cloud.google.com/icon: >-
      data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjE0NCIgdmlld0JveD0iMCAwIDE0NCAxNDQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiPgo8ZyBmaWx0ZXI9InVybCgjZmlsdGVyMF9kKSI+CjxwYXRoIGQ9Ik03Ni4wMDM4IDMuMjE2NEwxMTUuOTk2IDI2LjMwNjFDMTIzLjQyNCAzMC41OTQ2IDEyOCAzOC41MjAxIDEyOCA0Ny4wOTcyVjkzLjI3NjVDMTI4IDEwMS44NTQgMTIzLjQyNCAxMDkuNzc5IDExNS45OTYgMTE0LjA2OEw3Ni4wMDM4IDEzNy4xNTdDNjguNTc1OCAxNDEuNDQ2IDU5LjQyNDIgMTQxLjQ0NiA1MS45OTYyIDEzNy4xNTdMMTIuMDAzOCAxMTQuMDY4QzQuNTc1ODEgMTA5Ljc3OSAwIDEwMS44NTQgMCA5My4yNzY1VjQ3LjA5NzJDMCAzOC41MjAxIDQuNTc1ODEgMzAuNTk0NiAxMi4wMDM4IDI2LjMwNjFMNTEuOTk2MiAzLjIxNjRDNTkuNDI0MiAtMS4wNzIxMyA2OC41NzU4IC0xLjA3MjEzIDc2LjAwMzggMy4yMTY0WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCAxLjgxMjk5KSIgZmlsbD0id2hpdGUiLz4KPC9nPgo8cGF0aCBkPSJNNjQgMi4xNDQyNUM2NCAyLjE0NDI0IDY0IDIuMTQ0MjUgNjQgMi4xNDQyNUM1OS4wNDgxIC0wLjcxNDc0OSA1Mi45NDcgLTAuNzE0NzQ5IDQ3Ljk5NTEgMi4xNDQyNUM0Ny45OTUxIDIuMTQ0MjQgNDcuOTk1MSAyLjE0NDI1IDQ3Ljk5NTEgMi4xNDQyNUw4LjAwMjY0IDI1LjIzNEM4LjAwMjY3IDI1LjIzNCA4LjAwMjYxIDI1LjIzNCA4LjAwMjY0IDI1LjIzNEM2LjA5NTI4IDI2LjMzNTMgNi40MzQ2NiAyOC45NjIxIDguMzQyMDYgMzAuMDYzM0wyNi4yNzIxIDQwLjQxNTJDMjcuNDIyIDQxLjA3OTEgMjguODQ3NiA0MC45MDkgMjkuOTk3NSA0MC4yNDUxQzI5Ljk5NzUgNDAuMjQ1MSAyOS45OTc2IDQwLjI0NTEgMjkuOTk3NSA0MC4yNDUxTDQ5Ljk5NzQgMjguNjk4MkM0OS45OTc0IDI4LjY5ODIgNDkuOTk3NSAyOC42OTgxIDQ5Ljk5NzQgMjguNjk4MkM1My43MTAzIDI2LjU1NDcgNTguMjg0NiAyNi41NTQ2IDYxLjk5NzQgMjguNjk4QzYxLjk5NzQgMjguNjk4IDYxLjk5NzUgMjguNjk4MSA2MS45OTc0IDI4LjY5OEw4MS45OTc2IDQwLjI0NTFDODEuOTk3NiA0MC4yNDUxIDgxLjk5NzYgNDAuMjQ1MSA4MS45OTc2IDQwLjI0NTFDODMuMTQ3NiA0MC45MDkxIDg0LjU3MzEgNDEuMDc5MyA4NS43MjMxIDQwLjQxNTRMMTAzLjY1MyAzMC4wNjM0QzEwNS41NjEgMjguOTYyMSAxMDUuOSAyNi4zMzUyIDEwMy45OTMgMjUuMjM0QzEwMy45OTMgMjUuMjM0MSAxMDMuOTkyIDI1LjIzNCAxMDMuOTkzIDI1LjIzNEw2NCAyLjE0NDI1WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTYuMDAyNCA5LjgxNTQzKSIgZmlsbD0iIzAwNDQ2NiIvPgo8cGF0aCBkPSJNMTExLjk5NSAzOS4wOTQ3QzExMS45OTUgMzYuOTA0IDEwOS41NjQgMzUuODg4MyAxMDcuNjY3IDM2Ljk4MzdMODkuNjk4MyA0Ny4zNTc5Qzg4LjU1OTEgNDguMDE1NiA4Ny45OTc2IDQ5LjMyMiA4Ny45OTc2IDUwLjYzNzRWNzMuNzMxNEM4Ny45OTc2IDc4LjAxODYgODUuNzEwNSA4MS45ODAxIDgxLjk5NzcgODQuMTIzN0M4MS45OTc3IDg0LjEyMzYgODEuOTk3NiA4NC4xMjM3IDgxLjk5NzcgODQuMTIzN0w2MS45OTc0IDk1LjY3MDlDNjEuOTk3NSA5NS42NzA4IDYxLjk5NzMgOTUuNjcwOSA2MS45OTc0IDk1LjY3MDlDNjAuODUyOSA5Ni4zMzE0IDU5Ljk5NzggOTcuNDc1OCA1OS45OTc4IDk4Ljc5NzJMNTkuOTk3NiAxMTkuNTI0QzU5Ljk5NzYgMTIxLjcyIDYyLjA5NzcgMTIzLjMyMyA2NCAxMjIuMjI0QzYzLjk5OTkgMTIyLjIyNSA2NCAxMjIuMjI0IDY0IDEyMi4yMjRMMTAzLjk5MiA5OS4xMzQ4QzEwMy45OTIgOTkuMTM0OSAxMDMuOTkyIDk5LjEzNDggMTAzLjk5MiA5OS4xMzQ4QzEwOC45NDQgOTYuMjc1OCAxMTEuOTk1IDkwLjk5MiAxMTEuOTk1IDg1LjI3NFYzOS4wOTQ3WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTYuMDAyNCA5LjgxNTQzKSIgZmlsbD0iIzAwNDQ2NiIvPgo8cGF0aCBkPSJNNDcuOTk1IDEyMi4yMjRDNDkuODk3NCAxMjMuMzIzIDUxLjk5NzYgMTIxLjcyIDUxLjk5NzYgMTE5LjUyNEw1MS45OTc4IDk4Ljc5OEM1MS45OTc4IDk3LjQ3NjIgNTEuMTQyMyA5Ni4zMzE3IDQ5Ljk5NzYgOTUuNjcwOEM0OS45OTc2IDk1LjY3MDggNDkuOTk3NiA5NS42NzA3IDQ5Ljk5NzYgOTUuNjcwOEwyOS45OTc3IDg0LjEyMzhDMjkuOTk3NyA4NC4xMjM5IDI5Ljk5NzYgODQuMTIzOCAyOS45OTc3IDg0LjEyMzhDMjYuMjg0OSA4MS45ODAyIDIzLjk5NzYgNzguMDE4NiAyMy45OTc2IDczLjczMTRWNTAuNjM3NEMyMy45OTc2IDQ5LjMyMTkgMjMuNDM2MSA0OC4wMTU0IDIyLjI5NjggNDcuMzU3Nkw0LjMyODM3IDM2Ljk4MzZDMi40MzExNCAzNS44ODgzIDAgMzYuOTA0IDAgMzkuMDk0N1Y4NS4yNzRDMCA5MC45OTIgMy4wNTA0OCA5Ni4yNzU2IDguMDAyNTUgOTkuMTM0N0M4LjAwMjQ3IDk5LjEzNDYgOC4wMDI2NCA5OS4xMzQ3IDguMDAyNTUgOTkuMTM0N0w0Ny45OTUgMTIyLjIyNEM0Ny45OTUxIDEyMi4yMjQgNDcuOTk1IDEyMi4yMjQgNDcuOTk1IDEyMi4yMjRaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNi4wMDI0IDkuODE1NDMpIiBmaWxsPSIjMDA0NDY2Ii8+CjxwYXRoIGQ9Ik0yMiAwLjUzNTg1OEMyMy4yMzc1IC0wLjE3ODYxOSAyNC43NjI1IC0wLjE3ODYxOSAyNiAwLjUzNTg1OEw0NiAxMi4wODI5QzQ3LjIzNzUgMTIuNzk3NSA0OCAxNC4xMTc5IDQ4IDE1LjU0N1YzOC42NDFDNDggNDAuMDcgNDcuMjM3NSA0MS4zOTA2IDQ2IDQyLjEwNTFMMjYgNTMuNjUyMUMyNC43NjI1IDU0LjM2NjcgMjMuMjM3NSA1NC4zNjY3IDIyIDUzLjY1MjFMMiA0Mi4xMDUxQzAuNzYyNDUxIDQxLjM5MDYgMCA0MC4wNyAwIDM4LjY0MVYxNS41NDdDMCAxNC4xMTc5IDAuNzYyNDUxIDEyLjc5NzUgMiAxMi4wODI5TDIyIDAuNTM1ODU4WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDggNDQuOTA2MikiIGZpbGw9IiMyOEFFRDQiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kIiB4PSI1IiB5PSItMC4xODcwMTIiIHdpZHRoPSIxMzQiIGhlaWdodD0iMTQ2LjM3NCIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiPgo8ZmVGbG9vZCBmbG9vZC1vcGFjaXR5PSIwIiByZXN1bHQ9IkJhY2tncm91bmRJbWFnZUZpeCIvPgo8ZmVDb2xvck1hdHJpeCBpbj0iU291cmNlQWxwaGEiIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAyNTUgMCIvPgo8ZmVPZmZzZXQgZHk9IjEiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwLjEgMCIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluMj0iQmFja2dyb3VuZEltYWdlRml4IiByZXN1bHQ9ImVmZmVjdDFfZHJvcFNoYWRvdyIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDFfZHJvcFNoYWRvdyIgcmVzdWx0PSJzaGFwZSIvPgo8L2ZpbHRlcj4KPGNsaXBQYXRoIGlkPSJjbGlwMCI+CjxyZWN0IHdpZHRoPSIxNDQiIGhlaWdodD0iMTQ0IiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo=
    marketplace.cloud.google.com/deploy-info: '{partner_id: "cloudbees-public", product_id: "cloudbees-core", partner_name: "CloudBees"}'
  labels:
    app.kubernetes.io/name: "$name"
spec:
  descriptor:
    type: CloudBees
    version: '2.121.1.2'
    description: |-
      CloudBees is building the worldâ€™s first end-to-end automated software delivery system. We provide smart solutions for continuous development, integration and delivery. By making the software delivery process more productive, manageable and hassle-free, CloudBees puts companies on the fast track to transforming great ideas into great software and delivering value to their business more quickly.
    links:
    - description: Getting Started Guide
      url: https://go.cloudbees.com/docs/cloudbees-core/cloud-admin-guide/getting-started/#
    - description: CloudBees Core Administration Guide
      url: https://go.cloudbees.com/docs/cloudbees-core/cloud-admin-guide/
    - description: CloudBees Core Reference Architecture
      url: https://go.cloudbees.com/docs/cloudbees-core/cloud-reference-architecture/
    notes: |-
      Get the CloudBees Core Operations Center URL:

      ```shell
      kubectl get ing -n $namespace | grep cjoc

      # ex. kubectl get ing -n deployer-test | grep cjoc
      ```
      Paste the domain name listed into your browser to go to the CloudBees Core Operations Center and start the setup process.

      Or you can click on the cjoc Endpoints link under Kubernetes Engine > Services in the GCP console.

      The setup process will prompt you for an intial admin password. Execute this command to get it:

      ```shell
      kubectl exec $name-cjoc-0 -n $namespace -- cat /var/jenkins_home/secrets/initialAdminPassword

      # ex. kubectl exec cloudbees-core-1-cjoc-0 -n deployer-test -- cat /var/jenkins_home/secrets/initialAdminPassword
      ```
      You can use the Connect button at Kubernetes Engine > Clusters to launch Cloud Shell to issue this command.

      Follow the steps in the setup wizard to complete the installation.

      ## Using CloudBees Core
      To get started using CloudBees Core read our [Getting Started Guide](https://go.cloudbees.com/docs/cloudbees-core/cloud-admin-guide/getting-started/#).

      ## DNS
      The installation configures an xip.io domain. To configure a custom DNS, read [Creating DNS Record](https://go.cloudbees.com/docs/cloudbees-core/cloud-install-guide/gke-install/#creating-dns-record).

      ## HTTPS
      The installation configures a self-signed certificate. To configure your own SSL certificate, read [Ingress TLS Termination](https://go.cloudbees.com/docs/cloudbees-core/cloud-reference-architecture/ra-for-gke/#_ingress_tls_termination).

      ### CloudBees Core Support
      For CloudBees Core support, [visit the CloudBees support page](https://support.cloudbees.com/hc/en-us/requests).
  selector:
    matchLabels:
      app.kubernetes.io/name: "$name"
  componentKinds:
  - group: v1
    kind: ConfigMap
  - group: v1beta1
    kind: StatefulSet
  - group: v1
    kind: Service
  - group: v1
    kind: Ingress
